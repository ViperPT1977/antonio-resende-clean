{"ast":null,"code":"import * as React from 'react';\nimport { useLightboxProps, useMotionPreference, useEventCallback, useLayoutEffect, useLightboxState, isImageSlide, isImageFitCover, round, useDocumentContext, useController, usePointerEvents, cleanup, makeUseContext, createIcon, IconButton, devicePixelRatio, ImageSlide, clsx, cssClass, addToolbarButton, createModule } from '../../index.js';\nimport { EVENT_ON_KEY_DOWN, EVENT_ON_WHEEL, UNKNOWN_ACTION_TYPE, CLASS_FULLSIZE, CLASS_FLEX_CENTER, CLASS_SLIDE_WRAPPER, CLASS_SLIDE_WRAPPER_INTERACTIVE, PLUGIN_ZOOM } from '../../types.js';\nconst defaultZoomProps = {\n  maxZoomPixelRatio: 1,\n  zoomInMultiplier: 2,\n  doubleTapDelay: 300,\n  doubleClickDelay: 500,\n  doubleClickMaxStops: 2,\n  keyboardMoveDistance: 50,\n  wheelZoomDistanceFactor: 100,\n  pinchZoomDistanceFactor: 100,\n  scrollToZoom: false\n};\nconst resolveZoomProps = zoom => ({\n  ...defaultZoomProps,\n  ...zoom\n});\nfunction useZoomAnimation(zoom, offsetX, offsetY, zoomWrapperRef) {\n  const zoomAnimation = React.useRef(undefined);\n  const zoomAnimationStart = React.useRef(undefined);\n  const {\n    zoom: zoomAnimationDuration\n  } = useLightboxProps().animation;\n  const reduceMotion = useMotionPreference();\n  const playZoomAnimation = useEventCallback(() => {\n    var _a, _b, _c;\n    (_a = zoomAnimation.current) === null || _a === void 0 ? void 0 : _a.cancel();\n    zoomAnimation.current = undefined;\n    if (zoomAnimationStart.current && (zoomWrapperRef === null || zoomWrapperRef === void 0 ? void 0 : zoomWrapperRef.current)) {\n      try {\n        zoomAnimation.current = (_c = (_b = zoomWrapperRef.current).animate) === null || _c === void 0 ? void 0 : _c.call(_b, [{\n          transform: zoomAnimationStart.current\n        }, {\n          transform: `scale(${zoom}) translateX(${offsetX}px) translateY(${offsetY}px)`\n        }], {\n          duration: !reduceMotion ? zoomAnimationDuration !== null && zoomAnimationDuration !== void 0 ? zoomAnimationDuration : 500 : 0,\n          easing: zoomAnimation.current ? \"ease-out\" : \"ease-in-out\"\n        });\n      } catch (err) {\n        console.error(err);\n      }\n      zoomAnimationStart.current = undefined;\n      if (zoomAnimation.current) {\n        zoomAnimation.current.onfinish = () => {\n          zoomAnimation.current = undefined;\n        };\n      }\n    }\n  });\n  useLayoutEffect(playZoomAnimation, [zoom, offsetX, offsetY, playZoomAnimation]);\n  return React.useCallback(() => {\n    zoomAnimationStart.current = (zoomWrapperRef === null || zoomWrapperRef === void 0 ? void 0 : zoomWrapperRef.current) ? window.getComputedStyle(zoomWrapperRef.current).transform : undefined;\n  }, [zoomWrapperRef]);\n}\nfunction useZoomCallback(zoom, disabled) {\n  const {\n    on\n  } = useLightboxProps();\n  const onZoomCallback = useEventCallback(() => {\n    var _a;\n    if (!disabled) {\n      (_a = on.zoom) === null || _a === void 0 ? void 0 : _a.call(on, {\n        zoom\n      });\n    }\n  });\n  React.useEffect(onZoomCallback, [zoom, onZoomCallback]);\n}\nfunction useZoomProps() {\n  const {\n    zoom\n  } = useLightboxProps();\n  return resolveZoomProps(zoom);\n}\nfunction useZoomImageRect(slideRect, imageDimensions) {\n  var _a, _b;\n  let imageRect = {\n    width: 0,\n    height: 0\n  };\n  let maxImageRect = {\n    width: 0,\n    height: 0\n  };\n  const {\n    currentSlide\n  } = useLightboxState();\n  const {\n    imageFit\n  } = useLightboxProps().carousel;\n  const {\n    maxZoomPixelRatio\n  } = useZoomProps();\n  if (slideRect && currentSlide) {\n    const slide = {\n      ...currentSlide,\n      ...imageDimensions\n    };\n    if (isImageSlide(slide)) {\n      const cover = isImageFitCover(slide, imageFit);\n      const width = Math.max(...(((_a = slide.srcSet) === null || _a === void 0 ? void 0 : _a.map(x => x.width)) || []).concat(slide.width ? [slide.width] : []));\n      const height = Math.max(...(((_b = slide.srcSet) === null || _b === void 0 ? void 0 : _b.map(x => x.height)) || []).concat(slide.height ? [slide.height] : []));\n      if (width > 0 && height > 0 && slideRect.width > 0 && slideRect.height > 0) {\n        maxImageRect = cover ? {\n          width: Math.round(Math.min(width, slideRect.width / slideRect.height * height)),\n          height: Math.round(Math.min(height, slideRect.height / slideRect.width * width))\n        } : {\n          width,\n          height\n        };\n        maxImageRect = {\n          width: maxImageRect.width * maxZoomPixelRatio,\n          height: maxImageRect.height * maxZoomPixelRatio\n        };\n        imageRect = cover ? {\n          width: Math.min(slideRect.width, maxImageRect.width, width),\n          height: Math.min(slideRect.height, maxImageRect.height, height)\n        } : {\n          width: Math.round(Math.min(slideRect.width, slideRect.height / height * width, width)),\n          height: Math.round(Math.min(slideRect.height, slideRect.width / width * height, height))\n        };\n      }\n    }\n  }\n  const maxZoom = imageRect.width ? Math.max(round(maxImageRect.width / imageRect.width, 5), 1) : 1;\n  return {\n    imageRect,\n    maxZoom\n  };\n}\nfunction distance(pointerA, pointerB) {\n  return ((pointerA.clientX - pointerB.clientX) ** 2 + (pointerA.clientY - pointerB.clientY) ** 2) ** 0.5;\n}\nfunction scaleZoom(value, delta, factor = 100, clamp = 2) {\n  return value * Math.min(1 + Math.abs(delta / factor), clamp) ** Math.sign(delta);\n}\nfunction useZoomSensors(zoom, maxZoom, disabled, changeZoom, changeOffsets, zoomWrapperRef) {\n  const activePointers = React.useRef([]);\n  const lastPointerDown = React.useRef(0);\n  const pinchZoomDistance = React.useRef(undefined);\n  const {\n    globalIndex\n  } = useLightboxState();\n  const {\n    getOwnerWindow\n  } = useDocumentContext();\n  const {\n    containerRef,\n    subscribeSensors\n  } = useController();\n  const {\n    keyboardMoveDistance,\n    zoomInMultiplier,\n    wheelZoomDistanceFactor,\n    scrollToZoom,\n    doubleTapDelay,\n    doubleClickDelay,\n    doubleClickMaxStops,\n    pinchZoomDistanceFactor\n  } = useZoomProps();\n  const translateCoordinates = React.useCallback(event => {\n    if (containerRef.current) {\n      const {\n        pageX,\n        pageY\n      } = event;\n      const {\n        scrollX,\n        scrollY\n      } = getOwnerWindow();\n      const {\n        left,\n        top,\n        width,\n        height\n      } = containerRef.current.getBoundingClientRect();\n      return [pageX - left - scrollX - width / 2, pageY - top - scrollY - height / 2];\n    }\n    return [];\n  }, [containerRef, getOwnerWindow]);\n  const onKeyDown = useEventCallback(event => {\n    const {\n      key,\n      metaKey,\n      ctrlKey\n    } = event;\n    const meta = metaKey || ctrlKey;\n    const preventDefault = () => {\n      event.preventDefault();\n      event.stopPropagation();\n    };\n    if (zoom > 1) {\n      const move = (deltaX, deltaY) => {\n        preventDefault();\n        changeOffsets(deltaX, deltaY);\n      };\n      if (key === \"ArrowDown\") {\n        move(0, keyboardMoveDistance);\n      } else if (key === \"ArrowUp\") {\n        move(0, -keyboardMoveDistance);\n      } else if (key === \"ArrowLeft\") {\n        move(-keyboardMoveDistance, 0);\n      } else if (key === \"ArrowRight\") {\n        move(keyboardMoveDistance, 0);\n      }\n    }\n    const handleChangeZoom = zoomValue => {\n      preventDefault();\n      changeZoom(zoomValue);\n    };\n    if (key === \"+\" || meta && key === \"=\") {\n      handleChangeZoom(zoom * zoomInMultiplier);\n    } else if (key === \"-\" || meta && key === \"_\") {\n      handleChangeZoom(zoom / zoomInMultiplier);\n    } else if (meta && key === \"0\") {\n      handleChangeZoom(1);\n    }\n  });\n  const onWheel = useEventCallback(event => {\n    if (event.ctrlKey || scrollToZoom) {\n      if (Math.abs(event.deltaY) > Math.abs(event.deltaX)) {\n        event.stopPropagation();\n        changeZoom(scaleZoom(zoom, -event.deltaY, wheelZoomDistanceFactor), true, ...translateCoordinates(event));\n        return;\n      }\n    }\n    if (zoom > 1) {\n      event.stopPropagation();\n      if (!scrollToZoom) {\n        changeOffsets(event.deltaX, event.deltaY);\n      }\n    }\n  });\n  const clearPointer = React.useCallback(event => {\n    const pointers = activePointers.current;\n    pointers.splice(0, pointers.length, ...pointers.filter(p => p.pointerId !== event.pointerId));\n  }, []);\n  const replacePointer = React.useCallback(event => {\n    clearPointer(event);\n    event.persist();\n    activePointers.current.push(event);\n  }, [clearPointer]);\n  const onPointerDown = useEventCallback(event => {\n    var _a;\n    const pointers = activePointers.current;\n    if (event.pointerType === \"mouse\" && event.buttons > 1 || !((_a = zoomWrapperRef === null || zoomWrapperRef === void 0 ? void 0 : zoomWrapperRef.current) === null || _a === void 0 ? void 0 : _a.contains(event.target))) {\n      return;\n    }\n    if (zoom > 1) {\n      event.stopPropagation();\n    }\n    const {\n      timeStamp\n    } = event;\n    if (pointers.length === 0 && timeStamp - lastPointerDown.current < (event.pointerType === \"touch\" ? doubleTapDelay : doubleClickDelay)) {\n      lastPointerDown.current = 0;\n      changeZoom(zoom !== maxZoom ? zoom * Math.max(maxZoom ** (1 / doubleClickMaxStops), zoomInMultiplier) : 1, false, ...translateCoordinates(event));\n    } else {\n      lastPointerDown.current = timeStamp;\n    }\n    replacePointer(event);\n    if (pointers.length === 2) {\n      pinchZoomDistance.current = distance(pointers[0], pointers[1]);\n    }\n  });\n  const onPointerMove = useEventCallback(event => {\n    const pointers = activePointers.current;\n    const activePointer = pointers.find(p => p.pointerId === event.pointerId);\n    if (pointers.length === 2 && pinchZoomDistance.current) {\n      event.stopPropagation();\n      replacePointer(event);\n      const currentDistance = distance(pointers[0], pointers[1]);\n      const delta = currentDistance - pinchZoomDistance.current;\n      if (Math.abs(delta) > 0) {\n        changeZoom(scaleZoom(zoom, delta, pinchZoomDistanceFactor), true, ...pointers.map(x => translateCoordinates(x)).reduce((acc, coordinate) => coordinate.map((x, i) => acc[i] + x / 2)));\n        pinchZoomDistance.current = currentDistance;\n      }\n      return;\n    }\n    if (zoom > 1) {\n      event.stopPropagation();\n      if (activePointer) {\n        if (pointers.length === 1) {\n          changeOffsets((activePointer.clientX - event.clientX) / zoom, (activePointer.clientY - event.clientY) / zoom);\n        }\n        replacePointer(event);\n      }\n    }\n  });\n  const onPointerUp = React.useCallback(event => {\n    const pointers = activePointers.current;\n    if (pointers.length === 2 && pointers.find(p => p.pointerId === event.pointerId)) {\n      pinchZoomDistance.current = undefined;\n    }\n    clearPointer(event);\n  }, [clearPointer]);\n  const cleanupSensors = React.useCallback(() => {\n    const pointers = activePointers.current;\n    pointers.splice(0, pointers.length);\n    lastPointerDown.current = 0;\n    pinchZoomDistance.current = undefined;\n  }, []);\n  usePointerEvents(subscribeSensors, onPointerDown, onPointerMove, onPointerUp, disabled);\n  React.useEffect(cleanupSensors, [globalIndex, cleanupSensors]);\n  React.useEffect(() => {\n    if (!disabled) {\n      return cleanup(cleanupSensors, subscribeSensors(EVENT_ON_KEY_DOWN, onKeyDown), subscribeSensors(EVENT_ON_WHEEL, onWheel));\n    }\n    return () => {};\n  }, [disabled, subscribeSensors, cleanupSensors, onKeyDown, onWheel]);\n}\nfunction useZoomState(imageRect, maxZoom, zoomWrapperRef) {\n  const [zoom, setZoom] = React.useState(1);\n  const [offsetX, setOffsetX] = React.useState(0);\n  const [offsetY, setOffsetY] = React.useState(0);\n  const animate = useZoomAnimation(zoom, offsetX, offsetY, zoomWrapperRef);\n  const {\n    currentSlide,\n    globalIndex\n  } = useLightboxState();\n  const {\n    containerRect,\n    slideRect\n  } = useController();\n  const {\n    zoomInMultiplier\n  } = useZoomProps();\n  const currentSource = currentSlide && isImageSlide(currentSlide) ? currentSlide.src : undefined;\n  const disabled = !currentSource || !(zoomWrapperRef === null || zoomWrapperRef === void 0 ? void 0 : zoomWrapperRef.current);\n  useLayoutEffect(() => {\n    setZoom(1);\n    setOffsetX(0);\n    setOffsetY(0);\n  }, [globalIndex, currentSource]);\n  const changeOffsets = React.useCallback((dx, dy, targetZoom) => {\n    const newZoom = targetZoom || zoom;\n    const newOffsetX = offsetX - (dx || 0);\n    const newOffsetY = offsetY - (dy || 0);\n    const maxOffsetX = (imageRect.width * newZoom - slideRect.width) / 2 / newZoom;\n    const maxOffsetY = (imageRect.height * newZoom - slideRect.height) / 2 / newZoom;\n    setOffsetX(Math.min(Math.abs(newOffsetX), Math.max(maxOffsetX, 0)) * Math.sign(newOffsetX));\n    setOffsetY(Math.min(Math.abs(newOffsetY), Math.max(maxOffsetY, 0)) * Math.sign(newOffsetY));\n  }, [zoom, offsetX, offsetY, slideRect, imageRect.width, imageRect.height]);\n  const changeZoom = React.useCallback((targetZoom, rapid, dx, dy) => {\n    const newZoom = round(Math.min(Math.max(targetZoom + 0.001 < maxZoom ? targetZoom : maxZoom, 1), maxZoom), 5);\n    if (newZoom === zoom) return;\n    if (!rapid) {\n      animate();\n    }\n    changeOffsets(dx ? dx * (1 / zoom - 1 / newZoom) : 0, dy ? dy * (1 / zoom - 1 / newZoom) : 0, newZoom);\n    setZoom(newZoom);\n  }, [zoom, maxZoom, changeOffsets, animate]);\n  const handleControllerRectChange = useEventCallback(() => {\n    if (zoom > 1) {\n      if (zoom > maxZoom) {\n        changeZoom(maxZoom, true);\n      }\n      changeOffsets();\n    }\n  });\n  useLayoutEffect(handleControllerRectChange, [containerRect.width, containerRect.height, handleControllerRectChange]);\n  const zoomIn = React.useCallback(() => changeZoom(zoom * zoomInMultiplier), [zoom, zoomInMultiplier, changeZoom]);\n  const zoomOut = React.useCallback(() => changeZoom(zoom / zoomInMultiplier), [zoom, zoomInMultiplier, changeZoom]);\n  return {\n    zoom,\n    offsetX,\n    offsetY,\n    disabled,\n    changeOffsets,\n    changeZoom,\n    zoomIn,\n    zoomOut\n  };\n}\nconst ZoomControllerContext = React.createContext(null);\nconst useZoom = makeUseContext(\"useZoom\", \"ZoomControllerContext\", ZoomControllerContext);\nfunction ZoomContextProvider({\n  children\n}) {\n  const [zoomWrapper, setZoomWrapper] = React.useState();\n  const {\n    slideRect\n  } = useController();\n  const {\n    imageRect,\n    maxZoom\n  } = useZoomImageRect(slideRect, zoomWrapper === null || zoomWrapper === void 0 ? void 0 : zoomWrapper.imageDimensions);\n  const {\n    zoom,\n    offsetX,\n    offsetY,\n    disabled,\n    changeZoom,\n    changeOffsets,\n    zoomIn,\n    zoomOut\n  } = useZoomState(imageRect, maxZoom, zoomWrapper === null || zoomWrapper === void 0 ? void 0 : zoomWrapper.zoomWrapperRef);\n  useZoomCallback(zoom, disabled);\n  useZoomSensors(zoom, maxZoom, disabled, changeZoom, changeOffsets, zoomWrapper === null || zoomWrapper === void 0 ? void 0 : zoomWrapper.zoomWrapperRef);\n  const zoomRef = React.useMemo(() => ({\n    zoom,\n    maxZoom,\n    offsetX,\n    offsetY,\n    disabled,\n    zoomIn,\n    zoomOut,\n    changeZoom\n  }), [zoom, maxZoom, offsetX, offsetY, disabled, zoomIn, zoomOut, changeZoom]);\n  React.useImperativeHandle(useZoomProps().ref, () => zoomRef, [zoomRef]);\n  const context = React.useMemo(() => ({\n    ...zoomRef,\n    setZoomWrapper\n  }), [zoomRef, setZoomWrapper]);\n  return React.createElement(ZoomControllerContext.Provider, {\n    value: context\n  }, children);\n}\nconst ZoomInIcon = createIcon(\"ZoomIn\", React.createElement(React.Fragment, null, React.createElement(\"path\", {\n  d: \"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z\"\n}), React.createElement(\"path\", {\n  d: \"M12 10h-2v2H9v-2H7V9h2V7h1v2h2v1z\"\n})));\nconst ZoomOutIcon = createIcon(\"ZoomOut\", React.createElement(\"path\", {\n  d: \"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14zM7 9h5v1H7z\"\n}));\nconst ZoomButton = React.forwardRef(function ZoomButton({\n  zoomIn,\n  onLoseFocus\n}, ref) {\n  const wasEnabled = React.useRef(false);\n  const wasFocused = React.useRef(false);\n  const {\n    zoom,\n    maxZoom,\n    zoomIn: zoomInCallback,\n    zoomOut: zoomOutCallback,\n    disabled: zoomDisabled\n  } = useZoom();\n  const {\n    render\n  } = useLightboxProps();\n  const disabled = zoomDisabled || (zoomIn ? zoom >= maxZoom : zoom <= 1);\n  React.useEffect(() => {\n    if (disabled && wasEnabled.current && wasFocused.current) {\n      onLoseFocus();\n    }\n    if (!disabled) {\n      wasEnabled.current = true;\n    }\n  }, [disabled, onLoseFocus]);\n  return React.createElement(IconButton, {\n    ref: ref,\n    disabled: disabled,\n    label: zoomIn ? \"Zoom in\" : \"Zoom out\",\n    icon: zoomIn ? ZoomInIcon : ZoomOutIcon,\n    renderIcon: zoomIn ? render.iconZoomIn : render.iconZoomOut,\n    onClick: zoomIn ? zoomInCallback : zoomOutCallback,\n    onFocus: () => {\n      wasFocused.current = true;\n    },\n    onBlur: () => {\n      wasFocused.current = false;\n    }\n  });\n});\nfunction ZoomButtonsGroup() {\n  const zoomInRef = React.useRef(null);\n  const zoomOutRef = React.useRef(null);\n  const {\n    focus\n  } = useController();\n  const focusSibling = React.useCallback(sibling => {\n    var _a, _b;\n    if (!((_a = sibling.current) === null || _a === void 0 ? void 0 : _a.disabled)) {\n      (_b = sibling.current) === null || _b === void 0 ? void 0 : _b.focus();\n    } else {\n      focus();\n    }\n  }, [focus]);\n  const focusZoomIn = React.useCallback(() => focusSibling(zoomInRef), [focusSibling]);\n  const focusZoomOut = React.useCallback(() => focusSibling(zoomOutRef), [focusSibling]);\n  return React.createElement(React.Fragment, null, React.createElement(ZoomButton, {\n    zoomIn: true,\n    ref: zoomInRef,\n    onLoseFocus: focusZoomOut\n  }), React.createElement(ZoomButton, {\n    ref: zoomOutRef,\n    onLoseFocus: focusZoomIn\n  }));\n}\nfunction ZoomToolbarControl() {\n  const {\n    render\n  } = useLightboxProps();\n  const zoomRef = useZoom();\n  if (render.buttonZoom) {\n    return React.createElement(React.Fragment, null, render.buttonZoom(zoomRef));\n  }\n  return React.createElement(ZoomButtonsGroup, null);\n}\nfunction isResponsiveImageSlide(slide) {\n  var _a;\n  return (((_a = slide.srcSet) === null || _a === void 0 ? void 0 : _a.length) || 0) > 0;\n}\nfunction reducer({\n  current,\n  preload\n}, {\n  type,\n  source\n}) {\n  switch (type) {\n    case \"fetch\":\n      if (!current) {\n        return {\n          current: source\n        };\n      }\n      return {\n        current,\n        preload: source\n      };\n    case \"done\":\n      if (source === preload) {\n        return {\n          current: source\n        };\n      }\n      return {\n        current,\n        preload\n      };\n    default:\n      throw new Error(UNKNOWN_ACTION_TYPE);\n  }\n}\nfunction ResponsiveImage(props) {\n  var _a, _b;\n  const [{\n    current,\n    preload\n  }, dispatch] = React.useReducer(reducer, {});\n  const {\n    slide: image,\n    rect,\n    imageFit,\n    render,\n    interactive\n  } = props;\n  const srcSet = image.srcSet.sort((a, b) => a.width - b.width);\n  const width = (_a = image.width) !== null && _a !== void 0 ? _a : srcSet[srcSet.length - 1].width;\n  const height = (_b = image.height) !== null && _b !== void 0 ? _b : srcSet[srcSet.length - 1].height;\n  const cover = isImageFitCover(image, imageFit);\n  const maxWidth = Math.max(...srcSet.map(x => x.width));\n  const targetWidth = Math.min((cover ? Math.max : Math.min)(rect.width, width * (rect.height / height)), maxWidth);\n  const pixelDensity = devicePixelRatio();\n  const handleResize = useEventCallback(() => {\n    var _a;\n    const targetSource = (_a = srcSet.find(x => x.width >= targetWidth * pixelDensity)) !== null && _a !== void 0 ? _a : srcSet[srcSet.length - 1];\n    if (!current || srcSet.findIndex(x => x.src === current) < srcSet.findIndex(x => x === targetSource)) {\n      dispatch({\n        type: \"fetch\",\n        source: targetSource.src\n      });\n    }\n  });\n  useLayoutEffect(handleResize, [rect.width, rect.height, pixelDensity, handleResize]);\n  const handlePreload = useEventCallback(currentPreload => dispatch({\n    type: \"done\",\n    source: currentPreload\n  }));\n  const style = {\n    WebkitTransform: !interactive ? \"translateZ(0)\" : \"initial\"\n  };\n  if (!cover) {\n    Object.assign(style, rect.width / rect.height < width / height ? {\n      width: \"100%\",\n      height: \"auto\"\n    } : {\n      width: \"auto\",\n      height: \"100%\"\n    });\n  }\n  return React.createElement(React.Fragment, null, preload && preload !== current && React.createElement(ImageSlide, {\n    key: \"preload\",\n    ...props,\n    offset: undefined,\n    slide: {\n      ...image,\n      src: preload,\n      srcSet: undefined\n    },\n    style: {\n      position: \"absolute\",\n      visibility: \"hidden\",\n      ...style\n    },\n    onLoad: () => handlePreload(preload),\n    render: {\n      ...render,\n      iconLoading: () => null,\n      iconError: () => null\n    }\n  }), current && React.createElement(ImageSlide, {\n    key: \"current\",\n    ...props,\n    slide: {\n      ...image,\n      src: current,\n      srcSet: undefined\n    },\n    style: style\n  }));\n}\nfunction ZoomWrapper({\n  render,\n  slide,\n  offset,\n  rect\n}) {\n  var _a;\n  const [imageDimensions, setImageDimensions] = React.useState();\n  const zoomWrapperRef = React.useRef(null);\n  const {\n    zoom,\n    maxZoom,\n    offsetX,\n    offsetY,\n    setZoomWrapper\n  } = useZoom();\n  const interactive = zoom > 1;\n  const {\n    carousel,\n    on\n  } = useLightboxProps();\n  const {\n    currentIndex\n  } = useLightboxState();\n  useLayoutEffect(() => {\n    if (offset === 0) {\n      setZoomWrapper({\n        zoomWrapperRef,\n        imageDimensions\n      });\n      return () => setZoomWrapper(undefined);\n    }\n    return () => {};\n  }, [offset, imageDimensions, setZoomWrapper]);\n  let rendered = (_a = render.slide) === null || _a === void 0 ? void 0 : _a.call(render, {\n    slide,\n    offset,\n    rect,\n    zoom,\n    maxZoom\n  });\n  if (!rendered && isImageSlide(slide)) {\n    const slideProps = {\n      slide,\n      offset,\n      rect,\n      render,\n      imageFit: carousel.imageFit,\n      imageProps: carousel.imageProps,\n      onClick: offset === 0 ? () => {\n        var _a;\n        return (_a = on.click) === null || _a === void 0 ? void 0 : _a.call(on, {\n          index: currentIndex\n        });\n      } : undefined\n    };\n    rendered = isResponsiveImageSlide(slide) ? React.createElement(ResponsiveImage, {\n      ...slideProps,\n      slide: slide,\n      interactive: interactive,\n      rect: offset === 0 ? {\n        width: rect.width * zoom,\n        height: rect.height * zoom\n      } : rect\n    }) : React.createElement(ImageSlide, {\n      onLoad: img => setImageDimensions({\n        width: img.naturalWidth,\n        height: img.naturalHeight\n      }),\n      ...slideProps\n    });\n  }\n  if (!rendered) return null;\n  return React.createElement(\"div\", {\n    ref: zoomWrapperRef,\n    className: clsx(cssClass(CLASS_FULLSIZE), cssClass(CLASS_FLEX_CENTER), cssClass(CLASS_SLIDE_WRAPPER), interactive && cssClass(CLASS_SLIDE_WRAPPER_INTERACTIVE)),\n    style: offset === 0 ? {\n      transform: `scale(${zoom}) translateX(${offsetX}px) translateY(${offsetY}px)`\n    } : undefined\n  }, rendered);\n}\nconst Zoom = ({\n  augment,\n  addModule\n}) => {\n  augment(({\n    zoom: zoomProps,\n    toolbar,\n    render,\n    controller,\n    ...restProps\n  }) => {\n    const zoom = resolveZoomProps(zoomProps);\n    return {\n      zoom,\n      toolbar: addToolbarButton(toolbar, PLUGIN_ZOOM, React.createElement(ZoomToolbarControl, null)),\n      render: {\n        ...render,\n        slide: props => {\n          var _a;\n          return isImageSlide(props.slide) ? React.createElement(ZoomWrapper, {\n            render: render,\n            ...props\n          }) : (_a = render.slide) === null || _a === void 0 ? void 0 : _a.call(render, props);\n        }\n      },\n      controller: {\n        ...controller,\n        preventDefaultWheelY: zoom.scrollToZoom\n      },\n      ...restProps\n    };\n  });\n  addModule(createModule(PLUGIN_ZOOM, ZoomContextProvider));\n};\nexport { Zoom as default };","map":{"version":3,"names":["React","useLightboxProps","useMotionPreference","useEventCallback","useLayoutEffect","useLightboxState","isImageSlide","isImageFitCover","round","useDocumentContext","useController","usePointerEvents","cleanup","makeUseContext","createIcon","IconButton","devicePixelRatio","ImageSlide","clsx","cssClass","addToolbarButton","createModule","EVENT_ON_KEY_DOWN","EVENT_ON_WHEEL","UNKNOWN_ACTION_TYPE","CLASS_FULLSIZE","CLASS_FLEX_CENTER","CLASS_SLIDE_WRAPPER","CLASS_SLIDE_WRAPPER_INTERACTIVE","PLUGIN_ZOOM","defaultZoomProps","maxZoomPixelRatio","zoomInMultiplier","doubleTapDelay","doubleClickDelay","doubleClickMaxStops","keyboardMoveDistance","wheelZoomDistanceFactor","pinchZoomDistanceFactor","scrollToZoom","resolveZoomProps","zoom","useZoomAnimation","offsetX","offsetY","zoomWrapperRef","zoomAnimation","useRef","undefined","zoomAnimationStart","zoomAnimationDuration","animation","reduceMotion","playZoomAnimation","_a","_b","_c","current","cancel","animate","call","transform","duration","easing","err","console","error","onfinish","useCallback","window","getComputedStyle","useZoomCallback","disabled","on","onZoomCallback","useEffect","useZoomProps","useZoomImageRect","slideRect","imageDimensions","imageRect","width","height","maxImageRect","currentSlide","imageFit","carousel","slide","cover","Math","max","srcSet","map","x","concat","min","maxZoom","distance","pointerA","pointerB","clientX","clientY","scaleZoom","value","delta","factor","clamp","abs","sign","useZoomSensors","changeZoom","changeOffsets","activePointers","lastPointerDown","pinchZoomDistance","globalIndex","getOwnerWindow","containerRef","subscribeSensors","translateCoordinates","event","pageX","pageY","scrollX","scrollY","left","top","getBoundingClientRect","onKeyDown","key","metaKey","ctrlKey","meta","preventDefault","stopPropagation","move","deltaX","deltaY","handleChangeZoom","zoomValue","onWheel","clearPointer","pointers","splice","length","filter","p","pointerId","replacePointer","persist","push","onPointerDown","pointerType","buttons","contains","target","timeStamp","onPointerMove","activePointer","find","currentDistance","reduce","acc","coordinate","i","onPointerUp","cleanupSensors","useZoomState","setZoom","useState","setOffsetX","setOffsetY","containerRect","currentSource","src","dx","dy","targetZoom","newZoom","newOffsetX","newOffsetY","maxOffsetX","maxOffsetY","rapid","handleControllerRectChange","zoomIn","zoomOut","ZoomControllerContext","createContext","useZoom","ZoomContextProvider","children","zoomWrapper","setZoomWrapper","zoomRef","useMemo","useImperativeHandle","ref","context","createElement","Provider","ZoomInIcon","Fragment","d","ZoomOutIcon","ZoomButton","forwardRef","onLoseFocus","wasEnabled","wasFocused","zoomInCallback","zoomOutCallback","zoomDisabled","render","label","icon","renderIcon","iconZoomIn","iconZoomOut","onClick","onFocus","onBlur","ZoomButtonsGroup","zoomInRef","zoomOutRef","focus","focusSibling","sibling","focusZoomIn","focusZoomOut","ZoomToolbarControl","buttonZoom","isResponsiveImageSlide","reducer","preload","type","source","Error","ResponsiveImage","props","dispatch","useReducer","image","rect","interactive","sort","a","b","maxWidth","targetWidth","pixelDensity","handleResize","targetSource","findIndex","handlePreload","currentPreload","style","WebkitTransform","Object","assign","offset","position","visibility","onLoad","iconLoading","iconError","ZoomWrapper","setImageDimensions","currentIndex","rendered","slideProps","imageProps","click","index","img","naturalWidth","naturalHeight","className","Zoom","augment","addModule","zoomProps","toolbar","controller","restProps","preventDefaultWheelY","default"],"sources":["C:/Users/laram/Documents/DOCUMENTOS EMPRESA E CONTABILIDADE/PORTFOLIO/viper_portfolio_fixed/node_modules/yet-another-react-lightbox/dist/plugins/zoom/index.js"],"sourcesContent":["import * as React from 'react';\nimport { useLightboxProps, useMotionPreference, useEventCallback, useLayoutEffect, useLightboxState, isImageSlide, isImageFitCover, round, useDocumentContext, useController, usePointerEvents, cleanup, makeUseContext, createIcon, IconButton, devicePixelRatio, ImageSlide, clsx, cssClass, addToolbarButton, createModule } from '../../index.js';\nimport { EVENT_ON_KEY_DOWN, EVENT_ON_WHEEL, UNKNOWN_ACTION_TYPE, CLASS_FULLSIZE, CLASS_FLEX_CENTER, CLASS_SLIDE_WRAPPER, CLASS_SLIDE_WRAPPER_INTERACTIVE, PLUGIN_ZOOM } from '../../types.js';\n\nconst defaultZoomProps = {\n    maxZoomPixelRatio: 1,\n    zoomInMultiplier: 2,\n    doubleTapDelay: 300,\n    doubleClickDelay: 500,\n    doubleClickMaxStops: 2,\n    keyboardMoveDistance: 50,\n    wheelZoomDistanceFactor: 100,\n    pinchZoomDistanceFactor: 100,\n    scrollToZoom: false,\n};\nconst resolveZoomProps = (zoom) => ({\n    ...defaultZoomProps,\n    ...zoom,\n});\n\nfunction useZoomAnimation(zoom, offsetX, offsetY, zoomWrapperRef) {\n    const zoomAnimation = React.useRef(undefined);\n    const zoomAnimationStart = React.useRef(undefined);\n    const { zoom: zoomAnimationDuration } = useLightboxProps().animation;\n    const reduceMotion = useMotionPreference();\n    const playZoomAnimation = useEventCallback(() => {\n        var _a, _b, _c;\n        (_a = zoomAnimation.current) === null || _a === void 0 ? void 0 : _a.cancel();\n        zoomAnimation.current = undefined;\n        if (zoomAnimationStart.current && (zoomWrapperRef === null || zoomWrapperRef === void 0 ? void 0 : zoomWrapperRef.current)) {\n            try {\n                zoomAnimation.current = (_c = (_b = zoomWrapperRef.current).animate) === null || _c === void 0 ? void 0 : _c.call(_b, [\n                    { transform: zoomAnimationStart.current },\n                    { transform: `scale(${zoom}) translateX(${offsetX}px) translateY(${offsetY}px)` },\n                ], {\n                    duration: !reduceMotion ? (zoomAnimationDuration !== null && zoomAnimationDuration !== void 0 ? zoomAnimationDuration : 500) : 0,\n                    easing: zoomAnimation.current ? \"ease-out\" : \"ease-in-out\",\n                });\n            }\n            catch (err) {\n                console.error(err);\n            }\n            zoomAnimationStart.current = undefined;\n            if (zoomAnimation.current) {\n                zoomAnimation.current.onfinish = () => {\n                    zoomAnimation.current = undefined;\n                };\n            }\n        }\n    });\n    useLayoutEffect(playZoomAnimation, [zoom, offsetX, offsetY, playZoomAnimation]);\n    return React.useCallback(() => {\n        zoomAnimationStart.current = (zoomWrapperRef === null || zoomWrapperRef === void 0 ? void 0 : zoomWrapperRef.current)\n            ? window.getComputedStyle(zoomWrapperRef.current).transform\n            : undefined;\n    }, [zoomWrapperRef]);\n}\n\nfunction useZoomCallback(zoom, disabled) {\n    const { on } = useLightboxProps();\n    const onZoomCallback = useEventCallback(() => {\n        var _a;\n        if (!disabled) {\n            (_a = on.zoom) === null || _a === void 0 ? void 0 : _a.call(on, { zoom });\n        }\n    });\n    React.useEffect(onZoomCallback, [zoom, onZoomCallback]);\n}\n\nfunction useZoomProps() {\n    const { zoom } = useLightboxProps();\n    return resolveZoomProps(zoom);\n}\n\nfunction useZoomImageRect(slideRect, imageDimensions) {\n    var _a, _b;\n    let imageRect = { width: 0, height: 0 };\n    let maxImageRect = { width: 0, height: 0 };\n    const { currentSlide } = useLightboxState();\n    const { imageFit } = useLightboxProps().carousel;\n    const { maxZoomPixelRatio } = useZoomProps();\n    if (slideRect && currentSlide) {\n        const slide = { ...currentSlide, ...imageDimensions };\n        if (isImageSlide(slide)) {\n            const cover = isImageFitCover(slide, imageFit);\n            const width = Math.max(...(((_a = slide.srcSet) === null || _a === void 0 ? void 0 : _a.map((x) => x.width)) || []).concat(slide.width ? [slide.width] : []));\n            const height = Math.max(...(((_b = slide.srcSet) === null || _b === void 0 ? void 0 : _b.map((x) => x.height)) || []).concat(slide.height ? [slide.height] : []));\n            if (width > 0 && height > 0 && slideRect.width > 0 && slideRect.height > 0) {\n                maxImageRect = cover\n                    ? {\n                        width: Math.round(Math.min(width, (slideRect.width / slideRect.height) * height)),\n                        height: Math.round(Math.min(height, (slideRect.height / slideRect.width) * width)),\n                    }\n                    : { width, height };\n                maxImageRect = {\n                    width: maxImageRect.width * maxZoomPixelRatio,\n                    height: maxImageRect.height * maxZoomPixelRatio,\n                };\n                imageRect = cover\n                    ? {\n                        width: Math.min(slideRect.width, maxImageRect.width, width),\n                        height: Math.min(slideRect.height, maxImageRect.height, height),\n                    }\n                    : {\n                        width: Math.round(Math.min(slideRect.width, (slideRect.height / height) * width, width)),\n                        height: Math.round(Math.min(slideRect.height, (slideRect.width / width) * height, height)),\n                    };\n            }\n        }\n    }\n    const maxZoom = imageRect.width ? Math.max(round(maxImageRect.width / imageRect.width, 5), 1) : 1;\n    return { imageRect, maxZoom };\n}\n\nfunction distance(pointerA, pointerB) {\n    return ((pointerA.clientX - pointerB.clientX) ** 2 + (pointerA.clientY - pointerB.clientY) ** 2) ** 0.5;\n}\nfunction scaleZoom(value, delta, factor = 100, clamp = 2) {\n    return value * Math.min(1 + Math.abs(delta / factor), clamp) ** Math.sign(delta);\n}\nfunction useZoomSensors(zoom, maxZoom, disabled, changeZoom, changeOffsets, zoomWrapperRef) {\n    const activePointers = React.useRef([]);\n    const lastPointerDown = React.useRef(0);\n    const pinchZoomDistance = React.useRef(undefined);\n    const { globalIndex } = useLightboxState();\n    const { getOwnerWindow } = useDocumentContext();\n    const { containerRef, subscribeSensors } = useController();\n    const { keyboardMoveDistance, zoomInMultiplier, wheelZoomDistanceFactor, scrollToZoom, doubleTapDelay, doubleClickDelay, doubleClickMaxStops, pinchZoomDistanceFactor, } = useZoomProps();\n    const translateCoordinates = React.useCallback((event) => {\n        if (containerRef.current) {\n            const { pageX, pageY } = event;\n            const { scrollX, scrollY } = getOwnerWindow();\n            const { left, top, width, height } = containerRef.current.getBoundingClientRect();\n            return [pageX - left - scrollX - width / 2, pageY - top - scrollY - height / 2];\n        }\n        return [];\n    }, [containerRef, getOwnerWindow]);\n    const onKeyDown = useEventCallback((event) => {\n        const { key, metaKey, ctrlKey } = event;\n        const meta = metaKey || ctrlKey;\n        const preventDefault = () => {\n            event.preventDefault();\n            event.stopPropagation();\n        };\n        if (zoom > 1) {\n            const move = (deltaX, deltaY) => {\n                preventDefault();\n                changeOffsets(deltaX, deltaY);\n            };\n            if (key === \"ArrowDown\") {\n                move(0, keyboardMoveDistance);\n            }\n            else if (key === \"ArrowUp\") {\n                move(0, -keyboardMoveDistance);\n            }\n            else if (key === \"ArrowLeft\") {\n                move(-keyboardMoveDistance, 0);\n            }\n            else if (key === \"ArrowRight\") {\n                move(keyboardMoveDistance, 0);\n            }\n        }\n        const handleChangeZoom = (zoomValue) => {\n            preventDefault();\n            changeZoom(zoomValue);\n        };\n        if (key === \"+\" || (meta && key === \"=\")) {\n            handleChangeZoom(zoom * zoomInMultiplier);\n        }\n        else if (key === \"-\" || (meta && key === \"_\")) {\n            handleChangeZoom(zoom / zoomInMultiplier);\n        }\n        else if (meta && key === \"0\") {\n            handleChangeZoom(1);\n        }\n    });\n    const onWheel = useEventCallback((event) => {\n        if (event.ctrlKey || scrollToZoom) {\n            if (Math.abs(event.deltaY) > Math.abs(event.deltaX)) {\n                event.stopPropagation();\n                changeZoom(scaleZoom(zoom, -event.deltaY, wheelZoomDistanceFactor), true, ...translateCoordinates(event));\n                return;\n            }\n        }\n        if (zoom > 1) {\n            event.stopPropagation();\n            if (!scrollToZoom) {\n                changeOffsets(event.deltaX, event.deltaY);\n            }\n        }\n    });\n    const clearPointer = React.useCallback((event) => {\n        const pointers = activePointers.current;\n        pointers.splice(0, pointers.length, ...pointers.filter((p) => p.pointerId !== event.pointerId));\n    }, []);\n    const replacePointer = React.useCallback((event) => {\n        clearPointer(event);\n        event.persist();\n        activePointers.current.push(event);\n    }, [clearPointer]);\n    const onPointerDown = useEventCallback((event) => {\n        var _a;\n        const pointers = activePointers.current;\n        if ((event.pointerType === \"mouse\" && event.buttons > 1) ||\n            !((_a = zoomWrapperRef === null || zoomWrapperRef === void 0 ? void 0 : zoomWrapperRef.current) === null || _a === void 0 ? void 0 : _a.contains(event.target))) {\n            return;\n        }\n        if (zoom > 1) {\n            event.stopPropagation();\n        }\n        const { timeStamp } = event;\n        if (pointers.length === 0 &&\n            timeStamp - lastPointerDown.current < (event.pointerType === \"touch\" ? doubleTapDelay : doubleClickDelay)) {\n            lastPointerDown.current = 0;\n            changeZoom(zoom !== maxZoom ? zoom * Math.max(maxZoom ** (1 / doubleClickMaxStops), zoomInMultiplier) : 1, false, ...translateCoordinates(event));\n        }\n        else {\n            lastPointerDown.current = timeStamp;\n        }\n        replacePointer(event);\n        if (pointers.length === 2) {\n            pinchZoomDistance.current = distance(pointers[0], pointers[1]);\n        }\n    });\n    const onPointerMove = useEventCallback((event) => {\n        const pointers = activePointers.current;\n        const activePointer = pointers.find((p) => p.pointerId === event.pointerId);\n        if (pointers.length === 2 && pinchZoomDistance.current) {\n            event.stopPropagation();\n            replacePointer(event);\n            const currentDistance = distance(pointers[0], pointers[1]);\n            const delta = currentDistance - pinchZoomDistance.current;\n            if (Math.abs(delta) > 0) {\n                changeZoom(scaleZoom(zoom, delta, pinchZoomDistanceFactor), true, ...pointers\n                    .map((x) => translateCoordinates(x))\n                    .reduce((acc, coordinate) => coordinate.map((x, i) => acc[i] + x / 2)));\n                pinchZoomDistance.current = currentDistance;\n            }\n            return;\n        }\n        if (zoom > 1) {\n            event.stopPropagation();\n            if (activePointer) {\n                if (pointers.length === 1) {\n                    changeOffsets((activePointer.clientX - event.clientX) / zoom, (activePointer.clientY - event.clientY) / zoom);\n                }\n                replacePointer(event);\n            }\n        }\n    });\n    const onPointerUp = React.useCallback((event) => {\n        const pointers = activePointers.current;\n        if (pointers.length === 2 && pointers.find((p) => p.pointerId === event.pointerId)) {\n            pinchZoomDistance.current = undefined;\n        }\n        clearPointer(event);\n    }, [clearPointer]);\n    const cleanupSensors = React.useCallback(() => {\n        const pointers = activePointers.current;\n        pointers.splice(0, pointers.length);\n        lastPointerDown.current = 0;\n        pinchZoomDistance.current = undefined;\n    }, []);\n    usePointerEvents(subscribeSensors, onPointerDown, onPointerMove, onPointerUp, disabled);\n    React.useEffect(cleanupSensors, [globalIndex, cleanupSensors]);\n    React.useEffect(() => {\n        if (!disabled) {\n            return cleanup(cleanupSensors, subscribeSensors(EVENT_ON_KEY_DOWN, onKeyDown), subscribeSensors(EVENT_ON_WHEEL, onWheel));\n        }\n        return () => { };\n    }, [disabled, subscribeSensors, cleanupSensors, onKeyDown, onWheel]);\n}\n\nfunction useZoomState(imageRect, maxZoom, zoomWrapperRef) {\n    const [zoom, setZoom] = React.useState(1);\n    const [offsetX, setOffsetX] = React.useState(0);\n    const [offsetY, setOffsetY] = React.useState(0);\n    const animate = useZoomAnimation(zoom, offsetX, offsetY, zoomWrapperRef);\n    const { currentSlide, globalIndex } = useLightboxState();\n    const { containerRect, slideRect } = useController();\n    const { zoomInMultiplier } = useZoomProps();\n    const currentSource = currentSlide && isImageSlide(currentSlide) ? currentSlide.src : undefined;\n    const disabled = !currentSource || !(zoomWrapperRef === null || zoomWrapperRef === void 0 ? void 0 : zoomWrapperRef.current);\n    useLayoutEffect(() => {\n        setZoom(1);\n        setOffsetX(0);\n        setOffsetY(0);\n    }, [globalIndex, currentSource]);\n    const changeOffsets = React.useCallback((dx, dy, targetZoom) => {\n        const newZoom = targetZoom || zoom;\n        const newOffsetX = offsetX - (dx || 0);\n        const newOffsetY = offsetY - (dy || 0);\n        const maxOffsetX = (imageRect.width * newZoom - slideRect.width) / 2 / newZoom;\n        const maxOffsetY = (imageRect.height * newZoom - slideRect.height) / 2 / newZoom;\n        setOffsetX(Math.min(Math.abs(newOffsetX), Math.max(maxOffsetX, 0)) * Math.sign(newOffsetX));\n        setOffsetY(Math.min(Math.abs(newOffsetY), Math.max(maxOffsetY, 0)) * Math.sign(newOffsetY));\n    }, [zoom, offsetX, offsetY, slideRect, imageRect.width, imageRect.height]);\n    const changeZoom = React.useCallback((targetZoom, rapid, dx, dy) => {\n        const newZoom = round(Math.min(Math.max(targetZoom + 0.001 < maxZoom ? targetZoom : maxZoom, 1), maxZoom), 5);\n        if (newZoom === zoom)\n            return;\n        if (!rapid) {\n            animate();\n        }\n        changeOffsets(dx ? dx * (1 / zoom - 1 / newZoom) : 0, dy ? dy * (1 / zoom - 1 / newZoom) : 0, newZoom);\n        setZoom(newZoom);\n    }, [zoom, maxZoom, changeOffsets, animate]);\n    const handleControllerRectChange = useEventCallback(() => {\n        if (zoom > 1) {\n            if (zoom > maxZoom) {\n                changeZoom(maxZoom, true);\n            }\n            changeOffsets();\n        }\n    });\n    useLayoutEffect(handleControllerRectChange, [containerRect.width, containerRect.height, handleControllerRectChange]);\n    const zoomIn = React.useCallback(() => changeZoom(zoom * zoomInMultiplier), [zoom, zoomInMultiplier, changeZoom]);\n    const zoomOut = React.useCallback(() => changeZoom(zoom / zoomInMultiplier), [zoom, zoomInMultiplier, changeZoom]);\n    return { zoom, offsetX, offsetY, disabled, changeOffsets, changeZoom, zoomIn, zoomOut };\n}\n\nconst ZoomControllerContext = React.createContext(null);\nconst useZoom = makeUseContext(\"useZoom\", \"ZoomControllerContext\", ZoomControllerContext);\nfunction ZoomContextProvider({ children }) {\n    const [zoomWrapper, setZoomWrapper] = React.useState();\n    const { slideRect } = useController();\n    const { imageRect, maxZoom } = useZoomImageRect(slideRect, zoomWrapper === null || zoomWrapper === void 0 ? void 0 : zoomWrapper.imageDimensions);\n    const { zoom, offsetX, offsetY, disabled, changeZoom, changeOffsets, zoomIn, zoomOut } = useZoomState(imageRect, maxZoom, zoomWrapper === null || zoomWrapper === void 0 ? void 0 : zoomWrapper.zoomWrapperRef);\n    useZoomCallback(zoom, disabled);\n    useZoomSensors(zoom, maxZoom, disabled, changeZoom, changeOffsets, zoomWrapper === null || zoomWrapper === void 0 ? void 0 : zoomWrapper.zoomWrapperRef);\n    const zoomRef = React.useMemo(() => ({ zoom, maxZoom, offsetX, offsetY, disabled, zoomIn, zoomOut, changeZoom }), [zoom, maxZoom, offsetX, offsetY, disabled, zoomIn, zoomOut, changeZoom]);\n    React.useImperativeHandle(useZoomProps().ref, () => zoomRef, [zoomRef]);\n    const context = React.useMemo(() => ({ ...zoomRef, setZoomWrapper }), [zoomRef, setZoomWrapper]);\n    return React.createElement(ZoomControllerContext.Provider, { value: context }, children);\n}\n\nconst ZoomInIcon = createIcon(\"ZoomIn\", React.createElement(React.Fragment, null,\n    React.createElement(\"path\", { d: \"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z\" }),\n    React.createElement(\"path\", { d: \"M12 10h-2v2H9v-2H7V9h2V7h1v2h2v1z\" })));\nconst ZoomOutIcon = createIcon(\"ZoomOut\", React.createElement(\"path\", { d: \"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14zM7 9h5v1H7z\" }));\nconst ZoomButton = React.forwardRef(function ZoomButton({ zoomIn, onLoseFocus }, ref) {\n    const wasEnabled = React.useRef(false);\n    const wasFocused = React.useRef(false);\n    const { zoom, maxZoom, zoomIn: zoomInCallback, zoomOut: zoomOutCallback, disabled: zoomDisabled } = useZoom();\n    const { render } = useLightboxProps();\n    const disabled = zoomDisabled || (zoomIn ? zoom >= maxZoom : zoom <= 1);\n    React.useEffect(() => {\n        if (disabled && wasEnabled.current && wasFocused.current) {\n            onLoseFocus();\n        }\n        if (!disabled) {\n            wasEnabled.current = true;\n        }\n    }, [disabled, onLoseFocus]);\n    return (React.createElement(IconButton, { ref: ref, disabled: disabled, label: zoomIn ? \"Zoom in\" : \"Zoom out\", icon: zoomIn ? ZoomInIcon : ZoomOutIcon, renderIcon: zoomIn ? render.iconZoomIn : render.iconZoomOut, onClick: zoomIn ? zoomInCallback : zoomOutCallback, onFocus: () => {\n            wasFocused.current = true;\n        }, onBlur: () => {\n            wasFocused.current = false;\n        } }));\n});\n\nfunction ZoomButtonsGroup() {\n    const zoomInRef = React.useRef(null);\n    const zoomOutRef = React.useRef(null);\n    const { focus } = useController();\n    const focusSibling = React.useCallback((sibling) => {\n        var _a, _b;\n        if (!((_a = sibling.current) === null || _a === void 0 ? void 0 : _a.disabled)) {\n            (_b = sibling.current) === null || _b === void 0 ? void 0 : _b.focus();\n        }\n        else {\n            focus();\n        }\n    }, [focus]);\n    const focusZoomIn = React.useCallback(() => focusSibling(zoomInRef), [focusSibling]);\n    const focusZoomOut = React.useCallback(() => focusSibling(zoomOutRef), [focusSibling]);\n    return (React.createElement(React.Fragment, null,\n        React.createElement(ZoomButton, { zoomIn: true, ref: zoomInRef, onLoseFocus: focusZoomOut }),\n        React.createElement(ZoomButton, { ref: zoomOutRef, onLoseFocus: focusZoomIn })));\n}\n\nfunction ZoomToolbarControl() {\n    const { render } = useLightboxProps();\n    const zoomRef = useZoom();\n    if (render.buttonZoom) {\n        return React.createElement(React.Fragment, null, render.buttonZoom(zoomRef));\n    }\n    return React.createElement(ZoomButtonsGroup, null);\n}\n\nfunction isResponsiveImageSlide(slide) {\n    var _a;\n    return (((_a = slide.srcSet) === null || _a === void 0 ? void 0 : _a.length) || 0) > 0;\n}\nfunction reducer({ current, preload }, { type, source }) {\n    switch (type) {\n        case \"fetch\":\n            if (!current) {\n                return { current: source };\n            }\n            return { current, preload: source };\n        case \"done\":\n            if (source === preload) {\n                return { current: source };\n            }\n            return { current, preload };\n        default:\n            throw new Error(UNKNOWN_ACTION_TYPE);\n    }\n}\nfunction ResponsiveImage(props) {\n    var _a, _b;\n    const [{ current, preload }, dispatch] = React.useReducer(reducer, {});\n    const { slide: image, rect, imageFit, render, interactive } = props;\n    const srcSet = image.srcSet.sort((a, b) => a.width - b.width);\n    const width = (_a = image.width) !== null && _a !== void 0 ? _a : srcSet[srcSet.length - 1].width;\n    const height = (_b = image.height) !== null && _b !== void 0 ? _b : srcSet[srcSet.length - 1].height;\n    const cover = isImageFitCover(image, imageFit);\n    const maxWidth = Math.max(...srcSet.map((x) => x.width));\n    const targetWidth = Math.min((cover ? Math.max : Math.min)(rect.width, width * (rect.height / height)), maxWidth);\n    const pixelDensity = devicePixelRatio();\n    const handleResize = useEventCallback(() => {\n        var _a;\n        const targetSource = (_a = srcSet.find((x) => x.width >= targetWidth * pixelDensity)) !== null && _a !== void 0 ? _a : srcSet[srcSet.length - 1];\n        if (!current || srcSet.findIndex((x) => x.src === current) < srcSet.findIndex((x) => x === targetSource)) {\n            dispatch({ type: \"fetch\", source: targetSource.src });\n        }\n    });\n    useLayoutEffect(handleResize, [rect.width, rect.height, pixelDensity, handleResize]);\n    const handlePreload = useEventCallback((currentPreload) => dispatch({ type: \"done\", source: currentPreload }));\n    const style = {\n        WebkitTransform: !interactive ? \"translateZ(0)\" : \"initial\",\n    };\n    if (!cover) {\n        Object.assign(style, rect.width / rect.height < width / height ? { width: \"100%\", height: \"auto\" } : { width: \"auto\", height: \"100%\" });\n    }\n    return (React.createElement(React.Fragment, null,\n        preload && preload !== current && (React.createElement(ImageSlide, { key: \"preload\", ...props, offset: undefined, slide: { ...image, src: preload, srcSet: undefined }, style: { position: \"absolute\", visibility: \"hidden\", ...style }, onLoad: () => handlePreload(preload), render: {\n                ...render,\n                iconLoading: () => null,\n                iconError: () => null,\n            } })),\n        current && (React.createElement(ImageSlide, { key: \"current\", ...props, slide: { ...image, src: current, srcSet: undefined }, style: style }))));\n}\n\nfunction ZoomWrapper({ render, slide, offset, rect }) {\n    var _a;\n    const [imageDimensions, setImageDimensions] = React.useState();\n    const zoomWrapperRef = React.useRef(null);\n    const { zoom, maxZoom, offsetX, offsetY, setZoomWrapper } = useZoom();\n    const interactive = zoom > 1;\n    const { carousel, on } = useLightboxProps();\n    const { currentIndex } = useLightboxState();\n    useLayoutEffect(() => {\n        if (offset === 0) {\n            setZoomWrapper({ zoomWrapperRef, imageDimensions });\n            return () => setZoomWrapper(undefined);\n        }\n        return () => { };\n    }, [offset, imageDimensions, setZoomWrapper]);\n    let rendered = (_a = render.slide) === null || _a === void 0 ? void 0 : _a.call(render, { slide, offset, rect, zoom, maxZoom });\n    if (!rendered && isImageSlide(slide)) {\n        const slideProps = {\n            slide,\n            offset,\n            rect,\n            render,\n            imageFit: carousel.imageFit,\n            imageProps: carousel.imageProps,\n            onClick: offset === 0 ? () => { var _a; return (_a = on.click) === null || _a === void 0 ? void 0 : _a.call(on, { index: currentIndex }); } : undefined,\n        };\n        rendered = isResponsiveImageSlide(slide) ? (React.createElement(ResponsiveImage, { ...slideProps, slide: slide, interactive: interactive, rect: offset === 0 ? { width: rect.width * zoom, height: rect.height * zoom } : rect })) : (React.createElement(ImageSlide, { onLoad: (img) => setImageDimensions({ width: img.naturalWidth, height: img.naturalHeight }), ...slideProps }));\n    }\n    if (!rendered)\n        return null;\n    return (React.createElement(\"div\", { ref: zoomWrapperRef, className: clsx(cssClass(CLASS_FULLSIZE), cssClass(CLASS_FLEX_CENTER), cssClass(CLASS_SLIDE_WRAPPER), interactive && cssClass(CLASS_SLIDE_WRAPPER_INTERACTIVE)), style: offset === 0 ? { transform: `scale(${zoom}) translateX(${offsetX}px) translateY(${offsetY}px)` } : undefined }, rendered));\n}\n\nconst Zoom = ({ augment, addModule }) => {\n    augment(({ zoom: zoomProps, toolbar, render, controller, ...restProps }) => {\n        const zoom = resolveZoomProps(zoomProps);\n        return {\n            zoom,\n            toolbar: addToolbarButton(toolbar, PLUGIN_ZOOM, React.createElement(ZoomToolbarControl, null)),\n            render: {\n                ...render,\n                slide: (props) => { var _a; return isImageSlide(props.slide) ? React.createElement(ZoomWrapper, { render: render, ...props }) : (_a = render.slide) === null || _a === void 0 ? void 0 : _a.call(render, props); },\n            },\n            controller: { ...controller, preventDefaultWheelY: zoom.scrollToZoom },\n            ...restProps,\n        };\n    });\n    addModule(createModule(PLUGIN_ZOOM, ZoomContextProvider));\n};\n\nexport { Zoom as default };\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}